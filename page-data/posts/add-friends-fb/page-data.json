{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/add-friends-fb","result":{"data":{"markdownRemark":{"id":"47a3c7b5-fe9f-5c6f-8409-fa48c0d38e09","html":"<p>Adds people with more than 10 common friends.</p>\n<hr>\n<p>Change the number to the desired: <code>var minSharedFriends = 10;</code></p>\n<p>Run at this location: <a href=\"https://www.facebook.com/?sk=ff\">https://www.facebook.com/?sk=ff\n</a></p>\n<pre><code class=\"language-javascript\">var minSharedFriends = 10\n\nvar addFriendsCount = 100\nvar addPause = 3 * 1000\n\nfunction waitForScroll() {\n  return new Promise(function(resolve, reject) {\n    var it = 0\n    var interval = window.setInterval(\n      function() {\n        console.log('Wait...')\n        if (it++ > 15) {\n          window.clearInterval(interval)\n          resolve()\n        }\n        window.scrollBy(0, 2000)\n      },\n      800,\n      resolve\n    )\n  })\n}\n\nwaitForScroll().then(function() {\n  var added = 0\n  var addFriends = document.querySelectorAll(\n    '#fbSearchResultsBox li.friendBrowserListUnit'\n  )\n  addFriends = Array.prototype.slice.call(addFriends).reverse()\n\n  var clickInterval = window.setInterval(function() {\n    if (!addFriends.length || added++ == addFriendsCount) {\n      window.clearInterval(clickInterval)\n      return\n    }\n\n    var re = / ([0-9]+) /i\n    var liElem = addFriends.pop()\n    var button = liElem.querySelector('button.FriendRequestAdd')\n    var sharedFriends = liElem.querySelector('.friendBrowserSocialContext')\n    var personName = liElem.querySelector('.friendBrowserNameTitle').innerText\n    var sharedFriendsCount = 0\n\n    if (\n      sharedFriends &#x26;&#x26;\n      sharedFriends.innerText &#x26;&#x26;\n      sharedFriends.innerText.length &#x26;&#x26;\n      re.exec(sharedFriends.innerText) !== null &#x26;&#x26;\n      re.exec(sharedFriends.innerText).length &#x26;&#x26;\n      re.exec(sharedFriends.innerText)['1']\n    )\n      sharedFriendsCount = parseInt(re.exec(sharedFriends.innerText)['1'], 10)\n\n    button.scrollIntoView(false)\n    if (sharedFriendsCount >= minSharedFriends) {\n      console.log('Friend request sent: ' + personName)\n      button.click()\n    } else {\n      console.log('Not enough mutual friends: ' + personName)\n    }\n\n    try {\n      document.querySelector('div[role=\"dialog\"] a.layerCancel').click()\n    } catch (e) {}\n  }, addPause)\n})\n</code></pre>","fields":{"slug":"/posts/add-friends-fb","tagSlugs":["/tag/facebook","/tag/javascript","/tag/utilities"],"categorySlug":"/category/automation"},"frontmatter":{"date":"2018-08-08T01:14:45.562Z","description":"Adds people with more than 10 common friends.","category":"automation","tags":["facebook","javascript","utilities"],"title":"Automatically add friends to Facebook"}}},"pageContext":{"slug":"/posts/add-friends-fb","allCategories":[{"fieldValue":"automation","totalCount":1,"categoryColor":"pink-600"},{"fieldValue":"healthcare","totalCount":1,"categoryColor":"green-600"},{"fieldValue":"productivity","totalCount":7,"categoryColor":"indigo-600"},{"fieldValue":"programming","totalCount":2,"categoryColor":"blue-600"}]}},"staticQueryHashes":["2052939023","251939775","401334301"]}