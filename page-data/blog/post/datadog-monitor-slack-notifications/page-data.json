{"componentChunkName":"component---src-templates-post-template-js","path":"/blog/post/datadog-monitor-slack-notifications","result":{"data":{"markdownRemark":{"id":"30b7804f-9490-5741-b400-d9e06cf3cb9d","html":"<h4 id=\"научимся-мониторить-критичные-метрики-сайта-при-помощи-datadog-и-отправлять-нотификации-в-slack\" style=\"position:relative;\"><a href=\"#%D0%BD%D0%B0%D1%83%D1%87%D0%B8%D0%BC%D1%81%D1%8F-%D0%BC%D0%BE%D0%BD%D0%B8%D1%82%D0%BE%D1%80%D0%B8%D1%82%D1%8C-%D0%BA%D1%80%D0%B8%D1%82%D0%B8%D1%87%D0%BD%D1%8B%D0%B5-%D0%BC%D0%B5%D1%82%D1%80%D0%B8%D0%BA%D0%B8-%D1%81%D0%B0%D0%B9%D1%82%D0%B0-%D0%BF%D1%80%D0%B8-%D0%BF%D0%BE%D0%BC%D0%BE%D1%89%D0%B8-datadog-%D0%B8-%D0%BE%D1%82%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D1%8F%D1%82%D1%8C-%D0%BD%D0%BE%D1%82%D0%B8%D1%84%D0%B8%D0%BA%D0%B0%D1%86%D0%B8%D0%B8-%D0%B2-slack\" aria-label=\"научимся мониторить критичные метрики сайта при помощи datadog и отправлять нотификации в slack permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Научимся мониторить критичные метрики сайта при помощи Datadog и отправлять нотификации в Slack</h4>\n<hr>\n<p>Серия статей</p>\n<ol>\n<li><a href=\"/posts/create-docker-network-for-datadog\">Создаём защищённую сеть в Docker Swarm для внутренних сервисов на примере интеграции Datadog</a></li>\n<li><a href=\"/posts/connect-datadog-apm-to-docker-swarm\">Настраиваем Datadog APM в сети Docker Swarm</a></li>\n<li><a href=\"/posts/docker-swarm-php-fpm-nginx-metrics\">Собираем метрики php-fpm и nginx при помощи Datadog в сети Docker Swarm</a></li>\n<li><strong>Мониторим метрики при помощи Datadog Monitor и отправляем нотификации в Slack при возникновении проблем</strong></li>\n</ol>\n<p>В предыдущих статьях мы начали собирать метрики php-fpm и nginx в Datadog.\nСоздадим Datadog Monitor и будем отправлять нотификации в Slack если что-то пошло не так</p>\n<p><img src=\"/media/2020-08-29-datadog-monitor-slack-notifications/fire-alarm.jpg\" alt=\"Fire Alarm\" title=\"Fire Alarm\"></p>\n<h1 id=\"mониторинг-nginx\" style=\"position:relative;\"><a href=\"#m%D0%BE%D0%BD%D0%B8%D1%82%D0%BE%D1%80%D0%B8%D0%BD%D0%B3-nginx\" aria-label=\"mониторинг nginx permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Mониторинг nginx</h1>\n<p>Для примера будем мониторить количество одновременных подключений у nginx. </p>\n<p><a href=\"https://www.scalyr.com/blog/how-to-monitor-nginx-the-essential-guide\">Рекомендуется</a> отправлять нотификации в том\nслучае, если количество подключений больше 70% от максимального возможного (\n<a href=\"http://nginx.org/en/docs/ngx_core_module.html#worker_connections\">worker_connections</a> *\n<a href=\"http://nginx.org/en/docs/ngx_core_module.html#worker_processes\">worker_processes</a> для одного nginx-сервера ).</p>\n<p>Допустим, у нас установленые значения по умолчанию и в наличии один контейнер с nginx. Тогда максимальное количество\nвозможных одновременных соединений будет 512 * 1 * 1 = 512 (достаточно грубый расчёт).\nВ таком случае нотификации стоит отправлять на значении ±360 соединений.</p>\n<h1 id=\"настройка-интеграции-slack-и-datadog\" style=\"position:relative;\"><a href=\"#%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-%D0%B8%D0%BD%D1%82%D0%B5%D0%B3%D1%80%D0%B0%D1%86%D0%B8%D0%B8-slack-%D0%B8-datadog\" aria-label=\"настройка интеграции slack и datadog permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Настройка интеграции Slack и Datadog</h1>\n<p>Чтобы научить datadog отправлять нотификации в slack, необходимо установить интеграцию со стороны datadog и приложение\nсо стороны slack.</p>\n<h2 id=\"установка-приложения-в-slack\" style=\"position:relative;\"><a href=\"#%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0-%D0%BF%D1%80%D0%B8%D0%BB%D0%BE%D0%B6%D0%B5%D0%BD%D0%B8%D1%8F-%D0%B2-slack\" aria-label=\"установка приложения в slack permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Установка приложения в Slack</h2>\n<h3 id=\"установка\" style=\"position:relative;\"><a href=\"#%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0\" aria-label=\"установка permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Установка</h3>\n<p>Перейдём в Slack’е в настройку приложений</p>\n<p><img src=\"/media/2020-08-29-datadog-monitor-slack-notifications/slack-apps.png\" alt=\"Slack applications\" title=\"Slack applications\"></p>\n<p>Далее перейдём по Browse App Directory. Нас перебросит в каталог приложений для слака. Найдём datadog и установим его:</p>\n<p><img src=\"/media/2020-08-29-datadog-monitor-slack-notifications/slack-datadog-app.png\" alt=\"Slack Datadog Application\" title=\"Slack Datadog Application\"></p>\n<h3 id=\"webhook-url\" style=\"position:relative;\"><a href=\"#webhook-url\" aria-label=\"webhook url permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Webhook URL</h3>\n<p>Простейший способ отправить сообщение в Slack — использовать <a href=\"https://api.slack.com/messaging/webhooks\">Webhook</a>,\nсформированный определенным образом URL. Нам необходимо получить его для настройки интеграции.</p>\n<p>Во вкладке Settings приложения необходимо добавить Configuration, в котором сгенерируем Webhook URL.</p>\n<p><img src=\"/media/2020-08-29-datadog-monitor-slack-notifications/slack-datadog-app-config.png\" alt=\"Slack Datadog Application Config\" title=\"Slack Datadog Application Config\"></p>\n<h3 id=\"канал\" style=\"position:relative;\"><a href=\"#%D0%BA%D0%B0%D0%BD%D0%B0%D0%BB\" aria-label=\"канал permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Канал</h3>\n<p>Настройка Slack закончена, осталось создать канал, в который будут попадать нотификации из Datadog’а.\nСоздадим любой канал, для примера, я назову его <code>#datadog-notifications</code>. </p>\n<h2 id=\"настройка-интеграции-datadog\" style=\"position:relative;\"><a href=\"#%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-%D0%B8%D0%BD%D1%82%D0%B5%D0%B3%D1%80%D0%B0%D1%86%D0%B8%D0%B8-datadog\" aria-label=\"настройка интеграции datadog permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Настройка интеграции Datadog</h2>\n<p>Необходимо установить и включить интеграцию Datadog с Slack. Сделаем всё также, как делали ранее.</p>\n<p>В конфигурации интеграции необходимо создать новый аккаунт и указать Webhook URL, который мы получили на предыдущем шаге.\nТакже необходимо указать канал, в который мы будем слать нотификации — укажем имя канала, созданный ранее <code>#datadog-notifications</code>.</p>\n<p><img src=\"/media/2020-08-29-datadog-monitor-slack-notifications/datadog-slack-intergration.png\" alt=\"Datadog Slack Integration\" title=\"Datadog Slack Integration\"></p>\n<h1 id=\"настройка-datadog-monitor\" style=\"position:relative;\"><a href=\"#%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-datadog-monitor\" aria-label=\"настройка datadog monitor permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Настройка Datadog Monitor</h1>\n<p>Теперь всё готово, чтобы создать монитор и настроить его на отправку нотификаций с Slack</p>\n<p>Создадим monitor: Datadog > Monitors > Manage Monitors > Create Monitor. Нас интересует тип Metric </p>\n<p><img src=\"/media/2020-08-29-datadog-monitor-slack-notifications/datadog-create-monitor.png\" alt=\"Datadog Create Monitor\" title=\"Datadog Create Monitor\"></p>\n<p>Далее установим значения:</p>\n<p><img src=\"/media/2020-08-29-datadog-monitor-slack-notifications/datadog-monitor-config.png\" alt=\"Datadog Monitor Configuration\" title=\"Datadog Monitor Configuration\"></p>\n<h3 id=\"пройдёмся-по-настройкам-monitorа\" style=\"position:relative;\"><a href=\"#%D0%BF%D1%80%D0%BE%D0%B9%D0%B4%D1%91%D0%BC%D1%81%D1%8F-%D0%BF%D0%BE-%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0%D0%BC-monitor%D0%B0\" aria-label=\"пройдёмся по настройкам monitorа permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Пройдёмся по настройкам Monitor’а:</h3>\n<h4 id=\"choose-the-detection-method\" style=\"position:relative;\"><a href=\"#choose-the-detection-method\" aria-label=\"choose the detection method permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Choose the detection method:</h4>\n<p>В каком случае отправлять нотификацию. Укажем <code>Threshold Alert</code> — отправлять при превышении лимита</p>\n<h4 id=\"define-the-metric\" style=\"position:relative;\"><a href=\"#define-the-metric\" aria-label=\"define the metric permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Define the metric:</h4>\n<p>Какую метрику использовать </p>\n<pre><code>Metric `nginx.net.connections` \nfrom {найдём здесь ваш сервер}\n</code></pre>\n<h4 id=\"set-alert-conditions\" style=\"position:relative;\"><a href=\"#set-alert-conditions\" aria-label=\"set alert conditions permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Set alert conditions:</h4>\n<p>Здесь можно поиграться с настройками, но укажем основное: </p>\n<pre><code>Alert threshold > 450\nWarning threshold > 360\n</code></pre>\n<h4 id=\"say-whats-happening\" style=\"position:relative;\"><a href=\"#say-whats-happening\" aria-label=\"say whats happening permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Say what’s happening:</h4>\n<p>Здесь нам необходимо задать шаблон для нотификаций.\nОпишем максимально подробно случившуюся проблему.</p>\n<p>В шаблоне можно использовать подстановку переменных и что-то вроде условных операторов.\nНапример, если шаблон выглядит вот так: </p>\n<pre><code>{{#is_alert}}Alert{{/is_alert}}\n</code></pre>\n<p>, то сообщение Alert мы увидим только в случае, если произошло событие уровня Alert.</p>\n<p>Более подробно про возможности можно прочитать нажав ссылку <code>Use message template variables</code>:</p>\n<p><img src=\"/media/2020-08-29-datadog-monitor-slack-notifications/datadog-notifications-template-vars.png\" alt=\"Datadog Notifications Template Variables\" title=\"Datadog Notifications Template Variables\"></p>\n<p>В тексте сообщения необходимо упомянуть название канала Slack, в который мы хотим отправить сообщение с префиксом <code>@slack</code>.</p>\n<p>То есть, в нашем случае, сообщение должно содержать такой токен:</p>\n<pre><code>@slack-datadog-notifications\n</code></pre>\n<h4 id=\"проверка\" style=\"position:relative;\"><a href=\"#%D0%BF%D1%80%D0%BE%D0%B2%D0%B5%D1%80%D0%BA%D0%B0\" aria-label=\"проверка permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Проверка:</h4>\n<p>Перед сохранением можно проверить доставку сообщения в Slack при помощи <code>Test Notification</code>.\nЕсли тестовое сообщение доставлено — сохраняем монитор и ждём сообщений в канале. </p>\n<hr>\n<p>Предыдущая статья <a href=\"/posts/docker-swarm-php-fpm-nginx-metrics\">Мониторим состояние php-fpm и nginx при помощи Datadog в сети Docker Swarm</a></p>\n<hr>\n<h1 id=\"интересные-статьи\" style=\"position:relative;\"><a href=\"#%D0%B8%D0%BD%D1%82%D0%B5%D1%80%D0%B5%D1%81%D0%BD%D1%8B%D0%B5-%D1%81%D1%82%D0%B0%D1%82%D1%8C%D0%B8\" aria-label=\"интересные статьи permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Интересные статьи</h1>\n<p><a href=\"https://www.scalyr.com/blog/how-to-monitor-nginx-the-essential-guide\">MONITORING NGINX: THE ESSENTIAL GUIDE</a></p>","fields":{"slug":"/posts/datadog-monitor-slack-notifications","tagSlugs":["/tag/datadog","/tag/devops","/tag/slack","/tag/nginx"],"categorySlug":"/category/recipes"},"frontmatter":{"date":"2020-08-29T22:35:00.000Z","description":"Научимся мониторить критичные метрики сайта при помощи Datadog и отправлять нотификации в Slack ","category":"recipes","tags":["datadog","devops","slack","nginx"],"title":"Мониторим метрики при помощи Datadog Monitor и отправляем нотификации в Slack при возникновении проблем"}}},"pageContext":{"slug":"/posts/datadog-monitor-slack-notifications","allCategories":[{"fieldValue":"development","totalCount":3,"categoryColor":"pink-600"},{"fieldValue":"recipes","totalCount":6,"categoryColor":"green-600"}]}},"staticQueryHashes":["2052939023","251939775","401334301"]}